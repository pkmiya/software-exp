                         4 .list
                         5 **	lenz.s
                         6 **	$00で終了するデータの長さを求めるプログラム
                         7 **
                         8 
                         9 **
                        10 **	STRから始めて、$00が見つかるまで
                        11 **	1バイトずつカウントする
                        12 **	カウント結果はレジスタd0に格納する
                        13 **
                        14 
                        15 .section .text
                        16 start:
000400 4280             17 	clr.l	%d0	/* clrは指定されたレジスタ(d0)を0でクリア  */
000402 41F9 0000        18 	lea	STR, %a0
       0000             18 
                        19 SLEN_LP:	
000408 1218             20 	move.b	(%a0)+, %d1
00040a 0C01 0000        21 	cmpi.b	#0, %d1	/* d1と0を比較  */
00040e 6700 0010        22 	beq	STR_END
000412 0C01 0069        23 	cmpi.b #0x69, %d1 /* d1と'i'を比較  */
000416 6600 FFF0        24 	bne SLEN_LP 	/* iでない=CCRのZが0ならインクリメントしない */
00041a 5280             25 	addq.l	#1, %d0	/* 1カウントアップする  */
00041c 6000 FFEA        26 	bra	SLEN_LP
                        27 
                        28 STR_END:	
                        29 	** 実行の終り
000420 4E72 2700        30 	stop	#0x2700	/* 終了 */
                        31 
                        32 .section .data
000424 6D69 7373        33 STR:	.dc.b	'm','i','s','s','i','s','s','i','p','p','i',0	
       6973 7369        33 
       7070 6900        33 
                        34 .end
